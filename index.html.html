<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BRITHYS BOUTIQUE-MALEWA</title>
    <!-- Le script Tailwind CSS est inclus pour le style -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Configuration de la police de caractères pour un look moderne */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        /* Nouvelle police pour le style romantique du titre */
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            color: #1f2937;
        }

        /* Style personnalisé pour masquer le spinner des champs de saisie de quantité */
        input[type='number']::-webkit-inner-spin-button,
        input[type='number']::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* Style personnalisé pour le titre avec une ombre textuelle */
        .title-shadow {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* Nouveau style pour l'arrière-plan avec une image d'épices */
        .background-spices {
            background-image: url('https://images.pexels.com/photos/10398328/pexels-photo-10398328.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1');
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* L'image reste fixe lors du défilement */
        }
        
        /* Classe pour le titre romantique */
        .romantic-title {
            font-family: 'Dancing Script', cursive;
        }
    </style>
</head>
<!-- L'arrière-plan a été mis à jour avec une image d'épices -->
<body class="background-spices p-4 sm:p-6 lg:p-8">

    <!-- Conteneur principal de l'application -->
    <div class="max-w-7xl mx-auto bg-white rounded-xl shadow-lg p-6">
        
        <!-- En-tête de l'application -->
        <header class="text-center mb-8">
            <!-- Mise à jour du dégradé du titre pour inclure l'orange et le jaune, et la nouvelle police -->
            <h1 class="text-5xl font-bold mb-2 bg-gradient-to-r from-amber-500 to-yellow-400 bg-clip-text text-transparent title-shadow romantic-title">
                BRITHYS BOUTIQUE-MALEWA
            </h1>
            <!-- Logo de la dame en cuisinier. L'URL a été mise à jour. -->
            <div class="flex justify-center my-4">
                <img 
                    src="https://placehold.co/112x112/cccccc/333333?text=Logo+Chef"
                    alt="Logo du restaurant : une dame en tenue de cuisinier"
                    class="w-28 h-28 object-cover rounded-full border-4 border-white shadow-lg"
                >
            </div>
            <p class="text-lg text-gray-600">
                Lia bio (mangez bio) na prix ya se
            </p>
        </header>

        <!-- Nouvelle section pour la barre de recherche -->
        <div class="mb-6">
            <input 
                type="text" 
                id="search-input" 
                placeholder="Rechercher un plat ou un article..." 
                class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500 transition duration-300"
            >
        </div>

        <!-- Conteneur pour le menu, la boutique et le panier -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <!-- Section du menu et de la boutique -->
            <div class="lg:col-span-2 space-y-8">
                
                <!-- Section du menu du restaurant -->
                <section>
                    <h2 class="text-3xl font-semibold text-gray-800 mb-4">Menu du Restaurant</h2>
                    <div id="menu-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Les éléments du menu seront injectés ici par JavaScript -->
                    </div>
                </section>
                
                <!-- Section des articles de la boutique -->
                <section>
                    <h2 class="text-3xl font-semibold text-gray-800 mb-4">Articles de la Boutique</h2>
                    <div id="boutique-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Les articles de la boutique seront injectés ici par JavaScript -->
                    </div>
                </section>

            </div>

            <!-- Section du panier d'achat -->
            <aside class="lg:col-span-1 bg-gray-50 rounded-lg p-6 shadow-md h-fit sticky top-6">
                <h3 class="text-2xl font-semibold text-gray-800 mb-4">Votre Panier</h3>
                
                <!-- Liste des articles du panier -->
                <div id="cart-items" class="space-y-4">
                    <p class="text-gray-500 text-center" id="empty-cart-message">Votre panier est vide.</p>
                </div>
                
                <!-- Totaux du panier -->
                <div class="mt-6 pt-4 border-t-2 border-gray-200">
                    <div class="flex justify-between items-center text-xl font-bold text-gray-800">
                        <span>Total:</span>
                        <span id="cart-total">0,00 FC</span>
                    </div>
                </div>

                <!-- Bouton de commande mis à jour avec la couleur verte -->
                <button id="place-order-btn" class="mt-6 w-full bg-emerald-600 text-white font-bold py-3 rounded-lg shadow-md hover:bg-emerald-700 transition duration-300">
                    Passer la Commande
                </button>
            </aside>

        </div>

        <!-- Section de contact et d'adresse mise à jour -->
        <section class="mt-8 p-6 bg-gray-100 rounded-lg shadow-md">
            <h2 class="text-3xl font-semibold text-gray-800 mb-4">Contact & Adresse</h2>
            <div class="space-y-4">
                <p class="text-gray-700 flex items-center">
                    <!-- Mise à jour de la couleur de l'icône en vert -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-emerald-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    <!-- Adresse mise à jour -->
                    <span>16, avenue Malonda, Kinshasa, RDC</span>
                </p>
                <p class="text-gray-700 flex items-center">
                    <!-- Mise à jour de la couleur de l'icône en vert -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-emerald-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                    </svg>
                    <!-- Numéros de téléphone mis à jour -->
                    <span>+243 81 718 7050, +243 84 730 4217</span>
                </p>
                <p class="text-gray-700 flex items-center">
                    <!-- Mise à jour de la couleur de l'icône en vert -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-emerald-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                    <!-- E-mail mis à jour -->
                    <span>blaiseclips@gmail.com</span>
                </p>
            </div>
        </section>

    </div>

    <!-- Modale personnalisée pour les messages (remplace alert()) -->
    <div id="modal-overlay" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg p-6 shadow-xl max-w-sm w-full text-center">
            <h4 id="modal-title" class="text-xl font-bold mb-4"></h4>
            <p id="modal-message" class="text-gray-700 mb-6"></p>
            <button id="modal-close-btn" class="bg-emerald-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-emerald-700 transition duration-300">
                Fermer
            </button>
        </div>
    </div>

    <script>
        console.log("Script chargé et prêt.");
        // Le code JavaScript pour la gestion des données et des interactions
        document.addEventListener('DOMContentLoaded', () => {

            // --- VARIABLES GLOBALES ET DONNÉES ---
            
            // Panier d'achat, initialisé comme un objet vide
            let cart = {};

            // Données du menu et des articles de la boutique
            const allItems = [
                // Plats du menu. J'ai remplacé les images par des URL de dessins simples.
                { id: 'ndunda', type: 'menu', name: 'Ndunda', price: 1500, image_url: 'https://placehold.co/400x200/94A3B8/ffffff?text=Dessin+de+Ndunda' },
                { id: 'madesu', type: 'menu', name: 'Madesu', price: 1500, image_url: 'https://placehold.co/400x200/94A3B8/ffffff?text=Dessin+de+Madesu' },
                { id: 'pondu-madesu', type: 'menu', name: 'Pondu Madesu', price: 1500, image_url: 'https://placehold.co/400x200/94A3B8/ffffff?text=Dessin+de+Pondu' },
                { id: 'pondu', type: 'menu', name: 'Pondu', price: 1500, image_url: 'https://placehold.co/400x200/94A3B8/ffffff?text=Dessin+de+Pondu' },
                { id: 'soso', type: 'menu', name: 'Soso', price: 2500, image_url: 'https://placehold.co/400x200/94A3B8/ffffff?text=Dessin+de+Soso' },
                { id: 'mfumbwa', type: 'menu', name: 'Mfumbwa', price: 2000, image_url: 'https://placehold.co/400x200/94A3B8/ffffff?text=Dessin+de+Mfumbwa' },
                { id: 'mbisi-ya-mayu', type: 'menu', name: 'Mbisi ya Mayu', price: 2500, image_url: 'https://placehold.co/400x200/94A3B8/ffffff?text=Dessin+de+Poisson' },
                { id: 'poisson', type: 'menu', name: 'Poisson', price: 1500, image_url: 'https://placehold.co/400x200/94A3B8/ffffff?text=Dessin+de+Poisson' },
                
                // Accompagnements et desserts
                { id: 'fufu', type: 'menu', name: 'Fufu', price: 1000, image_url: 'https://placehold.co/400x200/94A3B8/ffffff?text=Dessin+de+Fufu' },
                { id: 'loso', type: 'menu', name: 'Loso', price: 1000, image_url: 'https://placehold.co/400x200/94A3B8/ffffff?text=Dessin+de+Riz' },
                { id: 'lipa', type: 'menu', name: 'Lipa', price: 500, image_url: 'https://placehold.co/400x200/94A3B8/ffffff?text=Dessin+de+Pain' },
                { id: 'cake', type: 'menu', name: 'Cake', price: 250, image_url: 'https://placehold.co/400x200/94A3B8/ffffff?text=Dessin+de+Gateau' },
                { id: 'maki', type: 'menu', name: 'Maki', price: 1000, image_url: 'https://placehold.co/400x200/94A3B8/ffffff?text=Dessin+de+Maki' },
                { id: 'makemba', type: 'menu', name: 'Makemba', price: 1000, image_url: 'https://placehold.co/400x200/94A3B8/ffffff?text=Dessin+de+Banane' },
                { id: 'makemba-bakalinga', type: 'menu', name: 'Makemba Bakalinga', price: 1200, image_url: 'https://placehold.co/400x200/94A3B8/ffffff?text=Dessin+de+Banane' },

                // Articles de la boutique (exemples)
                // Note : Les articles de la boutique n'ont pas d'images pour le moment
                { id: 't-shirt', type: 'boutique', name: 'T-shirt Logo', price: 8000 },
                { id: 'mug', type: 'boutique', name: 'Mug Personnalisé', price: 5000 },
                { id: 'bracelet', type: 'boutique', name: 'Bracelet Fait Main', price: 3000 },
                { id: 'sac-jute', type: 'boutique', name: 'Sac en Jute', price: 4500 },
            ];

            // --- SÉLECTEURS D'ÉLÉMENTS DU DOM ---
            const menuContainer = document.getElementById('menu-container');
            const boutiqueContainer = document.getElementById('boutique-container');
            const cartItemsContainer = document.getElementById('cart-items');
            const cartTotalElement = document.getElementById('cart-total');
            const placeOrderBtn = document.getElementById('place-order-btn');
            const emptyCartMessage = document.getElementById('empty-cart-message');
            const searchInput = document.getElementById('search-input');
            
            // Sélécteurs de la modale
            const modalOverlay = document.getElementById('modal-overlay');
            const modalTitle = document.getElementById('modal-title');
            const modalMessage = document.getElementById('modal-message');
            const modalCloseBtn = document.getElementById('modal-close-btn');

            // --- FONCTIONS UTILITIES ---

            /**
             * Affiche la modale personnalisée avec un titre et un message.
             * @param {string} title - Le titre de la modale.
             * @param {string} message - Le message à afficher.
             */
            function showModal(title, message) {
                modalTitle.textContent = title;
                modalMessage.textContent = message;
                modalOverlay.classList.remove('hidden');
                modalOverlay.classList.add('flex');
            }

            /**
             * Cache la modale personnalisée.
             */
            function hideModal() {
                modalOverlay.classList.remove('flex');
                modalOverlay.classList.add('hidden');
            }

            // --- RENDERING DES ÉLÉMENTS ---

            /**
             * Crée l'élément HTML pour un article (menu ou boutique).
             * @param {object} item - L'objet de l'article avec ses détails.
             * @returns {string} Le fragment HTML de l'article.
             */
            function createItemCard(item) {
                // Condition pour afficher l'image uniquement pour les articles de type 'menu'
                const imageHtml = item.type === 'menu' && item.image_url 
                    ? `<img src="${item.image_url}" alt="Image de ${item.name}" class="w-full h-32 object-cover rounded-t-lg mb-4" onerror="this.onerror=null;this.src='https://placehold.co/400x200/cccccc/333333?text=${item.name.replace(' ', '+')}';">`
                    : '';
                
                return `
                    <div class="bg-gray-100 p-6 rounded-lg shadow-md flex flex-col justify-between">
                        ${imageHtml}
                        <div>
                            <h4 class="text-xl font-semibold text-gray-700">${item.name}</h4>
                            <p class="text-lg text-emerald-600 font-bold my-2">${item.price.toFixed(2)} FC</p>
                        </div>
                        <div class="flex items-center space-x-2 mt-4">
                            <label for="qty-${item.id}" class="text-sm text-gray-600">Quantité:</label>
                            <input type="number" id="qty-${item.id}" name="quantity" value="1" min="1" class="w-16 text-center border rounded-lg py-1 focus:outline-none focus:ring-2 focus:ring-emerald-500" oninput="this.value = Math.abs(this.value)">
                            <button data-id="${item.id}" class="add-to-cart-btn bg-emerald-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-emerald-600 transition duration-300">
                                Ajouter
                            </button>
                        </div>
                    </div>
                `;
            }

            /**
             * Rend les articles du menu et de la boutique dans le DOM en fonction d'un filtre.
             * @param {string} searchTerm - Le terme de recherche.
             */
            function renderItems(searchTerm = '') {
                const normalizedSearchTerm = searchTerm.toLowerCase().trim();

                // Filtrer les articles en fonction du terme de recherche
                const filteredItems = allItems.filter(item => 
                    item.name.toLowerCase().includes(normalizedSearchTerm)
                );

                const menuItems = filteredItems.filter(item => item.type === 'menu');
                const boutiqueItems = filteredItems.filter(item => item.type === 'boutique');
                
                menuContainer.innerHTML = menuItems.map(createItemCard).join('');
                boutiqueContainer.innerHTML = boutiqueItems.map(createItemCard).join('');

                // Ajoute des écouteurs d'événements à tous les boutons "Ajouter"
                document.querySelectorAll('.add-to-cart-btn').forEach(button => {
                    button.addEventListener('click', handleAddToCart);
                });
            }

            /**
             * Met à jour l'affichage du panier et le total.
             */
            function renderCart() {
                cartItemsContainer.innerHTML = '';
                let total = 0;

                const cartKeys = Object.keys(cart);
                if (cartKeys.length === 0) {
                    emptyCartMessage.classList.remove('hidden');
                } else {
                    emptyCartMessage.classList.add('hidden');
                    cartKeys.forEach(itemId => {
                        const cartItem = cart[itemId];
                        const itemElement = document.createElement('div');
                        // L'arrière-plan des articles du panier est maintenant gris clair
                        itemElement.className = 'flex justify-between items-center bg-gray-100 p-4 rounded-lg shadow-sm';
                        itemElement.innerHTML = `
                            <div class="flex-grow">
                                <p class="text-gray-800 font-medium">${cartItem.name}</p>
                                <p class="text-sm text-gray-500">${cartItem.quantity} x ${cartItem.price.toFixed(2)} FC</p>
                            </div>
                            <span class="text-gray-700 font-semibold">${(cartItem.price * cartItem.quantity).toFixed(2)} FC</span>
                        `;
                        cartItemsContainer.appendChild(itemElement);
                        total += cartItem.price * cartItem.quantity;
                    });
                }
                
                cartTotalElement.textContent = `${total.toFixed(2)} FC`;
            }
            
            // --- GESTION DES ÉVÉNEMENTS ---

            /**
             * Gère l'ajout d'un article au panier.
             * @param {Event} event - L'objet événement du clic.
             */
            function handleAddToCart(event) {
                const button = event.currentTarget;
                const itemId = button.dataset.id;
                const quantityInput = document.getElementById(`qty-${itemId}`);
                let quantity = parseInt(quantityInput.value, 10);

                // Assure que la quantité est un nombre positif
                if (isNaN(quantity) || quantity <= 0) {
                    quantity = 1;
                }
                
                const item = allItems.find(i => i.id === itemId);

                if (item) {
                    if (cart[itemId]) {
                        // L'article est déjà dans le panier, met à jour la quantité
                        cart[itemId].quantity += quantity;
                    } else {
                        // Ajoute l'article au panier
                        cart[itemId] = { ...item, quantity: quantity };
                    }
                    renderCart();
                    showModal('Article Ajouté', `${quantity} x ${item.name} a été ajouté à votre panier.`);
                }
            }

            /**
             * Gère le processus de commande.
             */
            function handlePlaceOrder() {
                if (Object.keys(cart).length === 0) {
                    showModal('Panier Vide', 'Veuillez ajouter des articles à votre panier avant de commander.');
                    return;
                }

                // Afficher un résumé de la commande dans la console pour l'instant
                console.log("--- COMMANDE PASSÉE ---");
                console.log("Détails de la commande:");
                let totalAmount = 0;
                Object.keys(cart).forEach(itemId => {
                    const item = cart[itemId];
                    const itemTotal = item.price * item.quantity;
                    console.log(`${item.name} - Quantité: ${item.quantity} - Prix unitaire: ${item.price.toFixed(2)} FC - Total: ${itemTotal.toFixed(2)} FC`);
                    totalAmount += itemTotal;
                });
                console.log(`Montant Total de la Commande: ${totalAmount.toFixed(2)} FC`);
                console.log("------------------------");

                // Nettoyer le panier après la commande
                cart = {};
                renderCart();
                showModal('Commande Confirmée', `Votre commande de ${totalAmount.toFixed(2)} FC a été passée avec succès !`);
            }

            // --- ÉCOUTEURS D'ÉVÉNEMENTS ---
            
            // Écouteur pour la barre de recherche
            searchInput.addEventListener('input', (event) => {
                renderItems(event.target.value);
            });

            // Écouteur pour le bouton de commande
            placeOrderBtn.addEventListener('click', handlePlaceOrder);

            // Écouteur pour le bouton de fermeture de la modale
            modalCloseBtn.addEventListener('click', hideModal);

            // --- INITIALISATION ---

            // Rendre les éléments du menu et de la boutique au chargement
            renderItems();
            renderCart();
        });
    </script>
</body>
</html>
